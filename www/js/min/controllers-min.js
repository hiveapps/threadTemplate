var hive=angular.module("hive.controllers",[]);hive.controller("LoginCtrl",function(e,o,t){function s(e){switch(e.provider){case"password":return e.password.email.replace(/@.*/,"");case"twitter":return e.twitter.displayName;case"facebook":return e.facebook.displayName}}var i=new Firebase("https://chattemplate.firebaseio.com/");e.register=function(e,o){i.createUser({email:e,password:o},function(s){s?console.log("Error creating user:",s):(i.authWithPassword({email:e,password:o},function(e,o){e?console.log("Login Failed!",e):console.log("Authenticated successfully with payload:",o)}),t.go("hive.chat"))})},e.login=function(e,o){i.authWithPassword({email:e,password:o},function(e){e?console.log("Login Failed!",e):t.go("hive.chat")})};var a=!0,r=new Firebase("https://chattemplate.firebaseio.com");r.onAuth(function(e){e&&a&&r.child("users").child(e.uid).set({provider:e.provider,name:s(e)})}),e.logout=function(){i.unauth(),t.go("hive.login")};var n=new Firebase("https://chattemplate.firebaseio.com/"),c=n.getAuth();c?console.log("User "+c.uid+" is logged in with "+c.provider):console.log("User is logged out")}),hive.controller("chatCtrl",function(e,o,t,s){function i(o){e.messages=o.val()}var a=new Firebase("https://chattemplate.firebaseio.com/"),r=a.child("messages");e.submitMessage=function(){var o=r.push();o.set({messageDescription:e.messageDescription}),e.master=null,e.reset=function(){e.messageDescription=angular.copy(e.master),e.form&&e.form.$setPristine()},e.reset()};var n=new Firebase("https://chattemplate.firebaseio.com/messages");n.on("value",function(e){s(function(){i(e),console.log(e)})})});